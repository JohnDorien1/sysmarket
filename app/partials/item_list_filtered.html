<?php
require_once('config.php');
require_once('db_connect.php');
?>
<div class="template">
  <h1 style="text-align:left">Items</h1>
  <div class="alert alert-success" role="alert" ng-show="pendingItems">There are {{pendingItems}} item(s) awaiting blockchain confirmation before being listed.</div>
  <p class="lead" ng-if="items.length == 0">No active items found</p>
  <table ng-if="items.length > 0" class="table table-hover table-striped">
    <thead>
    <tr>
      <th>Item Name</th>
      <th>Category</th>
      <th>Quantity available</th>
      <th>Price</th>
    </tr>
    </thead>
    <tbody>
      <tr class="item-row">
        <?php
        $i = 0;
		$items = array();
		$sql = "SELECT * FROM items";
		$query = mysqli_query($mysqli, $sql);

		if(mysqli_num_rows($query) > 0)
		{
		while($result = mysqli_fetch_array($query))
		{
		$items[$i] = $result;
		$i++;
		}
		}
		$i = 0;
		for($a=0;$a<items.length;$a++){
			for($b=0;$b<4;$b++){
				echo "<td>" . items[$a][$b] . "</td>";
			}
			$a++;
		}
        ?>
      </tr>
    </tbody>
  </table>
</div>